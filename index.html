<!DOCTYPE html>
<html lang="en" onload="document.getElementById('qBox').focus()">

<head>
    <title>New Tab</title>
    <style>
        :root {
            --anim-list: opacity 0.18s;
        }

        * {
            color: #eee;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            margin: 0;
            padding: 0;
            outline: none;
            border: none;
            -webkit-transition: var(--anim-list);
            -moz-transition: var(--anim-list);
            -o-transition: var(--anim-list);
            transition: var(--anim-list);
            transition-timing-function: ease-out;
        }

        html {
            background-color: #000;
        }

        #main {
            width: 100vw;
            background-size: cover;
            background-position: center;
            overflow-x: hidden;
            margin-top: calc(50vh - 49px);
        }

        #qBox {
            color: #d8d8d8;
            background-color: #222;
            padding: 9px;
            font-size: 18px;
            line-height: 22px;
            height: 22px;
            width: 582px;
            max-width: calc(80% - 18px);
            display: block;
            margin: 0 auto 9px;
        }

        #secondary {
            display: block;
            margin: 0 auto;
            width: 600px;
            max-width: 80%;
        }

        #secondary div {
            display: block;
            width: 100%;
        }

        #secondary div * {
            line-height: 58px;
            width: 40px;
            height: 40px;
            padding: 9px;
        }

        #enginePick * {
            float: left;
            width: 40px;
            height: 40px;
            padding: 9px;
        }

        .clickable {
            opacity: 0.7;
            cursor: pointer;
        }

        .clickable:hover {
            opacity: 1.0;
        }

        img {
            display: none;
        }
    </style>

    <script>
        var qBox;

        function setup() {
            qBox = document.getElementById('qBox');
            qBox.focus();
            addEngines();
        }

        function addEngines() {
            var engines = [
                { name: "DuckDuckGo", img: "duckduckgo.svg", address: "duckduckgo.com/?q=" },
                { name: "Ecosia", img: "ecosia.svg", address: "ecosia.org/search?q=" },
                { name: "Brave", img: "brave.svg", address: "search.brave.com/search?q=" },
                { name: "Bing", img: "bing.svg", address: "bing.com/search?q=" },
                { name: "Google", img: "google.svg", address: "google.com/search?q=" },
                {name: "YouTube", img: "youtube.svg", address: "www.youtube.com/results?search_query="}
            ];
            var home = document.getElementById("engines");
            for (var i = 0; i < engines.length; i++) {
                let item = engines[i];
                var build = document.createElement('img');
                build.src = item.img;
                build.title = "Search with " + item.name;
                build.onload = function (evt) {
                    evt.currentTarget.style.display = 'inline-block'
                };
                build.onclick = function(evt) {
                    search(item.address);
                }
                build.classList.add('clickable');
                home.appendChild(build);
            }
        }

        document.onkeydown = function (e) {
            let k = e.key;
            if (k.toLowerCase() == "enter") {
                search("duckduckgo.com/");
            } else if (qBox != document.activeElement) {
                qBox.focus();
            }
        }

        function search(prefix) {
            let search = "https://" + prefix + qBox.value.replace(" ", "+").replace("'", "%27");
            qBox.value = "";
            qBox.focus();
            window.open(search);
        }
    </script>

</head>

<body id="main" onload="setup()">
    <input type="text" id="qBox" title="Search" />
    <div id="secondary">
        <div id="engines"></div>
    </div>
</body>

</html>